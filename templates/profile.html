{% extends 'base.html' %}
{% block content %}
<div class='header'>
    <h1 class='page-title'>Профиль</h1>
</div>

<div class='card' style='display:flex;align-items:center;gap:20px;margin-bottom:30px;'>
    {% if data.user.photo_url %}
    <img src='{{ data.user.photo_url }}' style='width:100px;height:100px;border-radius:50%;border:3px solid var(--accent)'>
    {% else %}
    <div style='width:100px;height:100px;border-radius:50%;background:#444;display:flex;align-items:center;justify-content:center;font-size:40px;border:3px solid var(--accent)'>{{ data.user.first_name[0] }}</div>
    {% endif %}
    <div>
        <h2 style='font-size:24px'>{{ data.user.first_name }}</h2>
        <p style='color:var(--text-secondary)'>@{{ data.user.username or 'Нет username' }}</p>
        <p style='color:var(--accent);font-weight:bold'>ID: {{ data.user.telegram_id }}</p>
    </div>
</div>

<div class='grid-container'>
    <div class='card'>
        <div class='card-title'>Баланс</div>
        <div class='stat-value'>{{ data.user.balance }}</div>
    </div>
    <div class='card'>
        <div class='card-title'>Достижения</div>
        <div class='stat-value'>{{ data.achievements|selectattr('earned')|list|length }}/{{ data.achievements|length }}</div>
    </div>
</div>

<h3 style='margin:30px 0 15px;'>Мои достижения</h3>
<div class='grid-container'>
    {% for ach in data.achievements %}
    <div class='card' style='opacity: {{ 1 if ach.earned else 0.5 }}; border-color: {{ "#00ff88" if ach.earned else "#333" }}'>
        <span class='card-icon'>{{ ach.icon }}</span>
        <div class='card-title'>{{ ach.name }}</div>
        <div class='card-desc'>{{ ach.desc }}</div>
        {% if ach.earned %}
            <div style='color:var(--accent);font-size:12px;font-weight:bold'>ПОЛУЧЕНО</div>
        {% else %}
            <div style='color:#666;font-size:12px'>В процессе...</div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}
